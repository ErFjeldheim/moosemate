schemaVersion: 2.2.0
metadata:
  name: moosemate
  version: 1.0.0
  displayName: MooseMate Application
  description: A JavaFX application with Spring Boot REST API and Maven
  tags: [Java, JavaFX, Spring Boot, Maven]
  projectType: maven
  language: java
  provider: Red Hat
  supportUrl: https://github.com/eclipse/che

components:
  - name: tools
    container:
      image: registry.access.redhat.com/ubi9/openjdk-21
      memoryLimit: 4Gi
      memoryRequest: 1Gi
      cpuLimit: 2000m
      cpuRequest: 500m
      mountSources: true
      env:
        - name: JAVA_HOME
          value: /usr/lib/jvm/java-21
        - name: MAVEN_OPTS
          value: -Xmx2048m
      endpoints:
        - name: rest-api
          targetPort: 8080
          exposure: public
          protocol: http

commands:
  - id: maven-build
    exec:
      label: "Maven: Build"
      component: tools
      workingDir: ${PROJECT_SOURCE}/moosemate
      commandLine: mvn clean install
      group: { kind: build, isDefault: true }

  - id: maven-test
    exec:
      label: "Maven: Test"
      component: tools
      workingDir: ${PROJECT_SOURCE}/moosemate
      commandLine: mvn test

  - id: run-rest-api
    exec:
      label: "Run: REST API"
      component: tools
      workingDir: ${PROJECT_SOURCE}/moosemate/rest
      commandLine: mvn spring-boot:run
      group: { kind: run, isDefault: true }
